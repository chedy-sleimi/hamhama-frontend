<!-- src/app/recipe/recipe-form/recipe-form.component.html -->
<h2>{{ isEditMode ? 'Edit Recipe' : 'Create New Recipe' }}</h2>
<app-loading-spinner *ngIf="loading"></app-loading-spinner>
<app-error-message [message]="error"></app-error-message>

<form [formGroup]="recipeForm" (ngSubmit)="onSubmit()" *ngIf="!loading">
    <div class="form-group">
        <label for="name">Recipe Name</label>
        <input type="text" id="name" formControlName="name" [ngClass]="{ 'is-invalid': submitted && f['name'].errors }">
        <div *ngIf="submitted && f['name'].errors" class="invalid-feedback">
            <div *ngIf="f['name'].errors['required']">Name is required</div>
        </div>
    </div>

    <div class="form-group">
        <label for="description">Description</label>
        <textarea id="description" formControlName="description" rows="5" [ngClass]="{ 'is-invalid': submitted && f['description'].errors }"></textarea>
         <div *ngIf="submitted && f['description'].errors" class="invalid-feedback">
            <div *ngIf="f['description'].errors['required']">Description is required</div>
        </div>
    </div>

    <div class="form-group">
        <label for="category">Category</label>
        <select id="category" formControlName="category" [ngClass]="{ 'is-invalid': submitted && f['category'].errors }">
            <option [ngValue]="null" disabled>Select a Category</option>
            <option *ngFor="let cat of recipeCategories" [value]="cat">{{ cat | titlecase }}</option>
        </select>
         <div *ngIf="submitted && f['category'].errors" class="invalid-feedback">
            <div *ngIf="f['category'].errors['required']">Category is required</div>
        </div>
    </div>

    <!-- Add Ingredient Selection/Management Here -->
    <!-- This part can be complex: Multi-select, quantity, unit inputs -->

    <div class="form-group button-group">
        <button type="submit" [disabled]="saving">
           <app-loading-spinner *ngIf="saving" message=""></app-loading-spinner>
           <span *ngIf="!saving">{{ isEditMode ? 'Update Recipe' : 'Create Recipe' }}</span>
        </button>
        <button type="button" class="cancel-button" (click)="cancel()">Cancel</button>
    </div>
</form>